<html lang="en">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap/dist/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Your Top-Down Table</title>
  <!-- Add Bootstrap CSS link -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap/dist/css/bootstrap.min.css">
  <!-- Add Angular Material styles -->
  <link href="https://cdn.jsdelivr.net/npm/@angular/material@12.2.7/prebuilt-themes/indigo-pink.css" rel="stylesheet">
</head>

<body>
  <!-- Create a container for the tabs -->
  <div class="tab-container">

    <h2>Top-Down Approach for {{ dynamicTitle }}</h2>
    <br>
    <br>
    <mat-tab-group>
      <mat-tab label="Aggregate">

        <!-- Content for Tab 1 -->
        <div class="top-down-container">

          <table class="top-down-table">
            <thead>
              <tr class="header-row">
                <th></th>
                <th><i class="fas fa-mobile"></i></th>
                <th><i class="fas fa-laptop"></i></th>
                <th><i class="fas fa-tablet"></i></th>
                <td>Total</td>
                <!-- Add more icons as needed -->
              </tr>
              <tr class="header-values">
                <td>{{ licenseeName }} Total Sales Value </td>
                <td *ngFor="let headerValue of headerValues">{{ headerValue.toFixed(2) }} M$</td>
                <td>{{ calculateValuesTotal().toFixed(2) }} M$</td>
              </tr>
            </thead>
            <tbody>
              <ng-container *ngFor="let technology of technologies; let i = index">
                <tr class="technology-row">
                  <td>{{ technology }}</td>
                  <td *ngFor="let percentage of percentages[i]; let colIndex = index" class="cell-button"
                    (click)="openPercentageDialog(percentage)">
                    {{ percentage.toFixed(2) }}%
                  </td>
                  <td>{{ (calculateTotal(i)).toFixed(2) }} M$</td>
                </tr>
              </ng-container>
            </tbody>
          </table>
        </div>
      </mat-tab>
      <mat-tab label="Apportionment">
        <!-- Content for Tab 2 -->
        <div class="top-down-container">
          <table class="top-down-table">
            <thead>
              <tr class="header-row">
                <th></th>
                <th><i class="fas fa-mobile"></i></th>
                <th><i class="fas fa-laptop"></i></th>
                <th><i class="fas fa-tablet"></i></th>
                <td>Total</td>
                <!-- Add more icons as needed -->
              </tr>
              <tr class="header-values">
                <td>Share of the total per {{ licensorName }}
                </td>
                <td *ngFor="let headerValue of headerValues">{{ headerValue.toFixed(2) }} M$</td>
                <td>{{ calculateValuesTotal().toFixed(2) }} M$</td>
              </tr>
            </thead>
            <tbody>
              <!-- Replace technologies with technologiesTab2 in the table -->
              <ng-container *ngFor="let technology of technologiesForNewTable; let i = index">
                <tr class="technology-row">
                  <td>{{ technology }}</td>
                  <td *ngFor="let percentage of percentages[i]; let colIndex = index" class="cell-button"
                    (click)="openPercentageDialog(percentage)">
                    {{ percentage.toFixed(2) }}%
                  </td>
                  <td>{{ (calculateTotal(i)).toFixed(2) }} M$</td>
                </tr>
              </ng-container>

            </tbody>
          </table>

        </div>
      </mat-tab>
    </mat-tab-group>
  </div>

  <!-- Add Bootstrap JS and jQuery scripts for tooltips -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap/dist/js/bootstrap.min.js"></script>
  <!-- Add Angular Material scripts -->
  <script src="https://cdn.jsdelivr.net/npm/@angular/core@12.2.7/bundles/core.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@angular/common@12.2.7/bundles/common.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@angular/material@12.2.7/bundles/material.umd.min.js"></script>
</body>

</html>